{% load i18n sizeformat parse_date %}

<div class="detail">
  <dl class="dl-horizontal">
		<dt>{% trans "Name" %}</dt>
    <dd>{{ router.name|default:_("None") }}</dd>
    <dt>{% trans "ID" %}</dt>
    <dd>{{ router.id }}</dd>
    <dt>{% trans "Project ID" %}</dt>
    <dd>{{ router.tenant_id }}</dd>
    <dt>{% trans "Status" %}</dt>
    <dd>{{ router.status_label|capfirst }}</dd>
    <dt>{% trans "Admin State" %}</dt>
    <dd>{{ router.admin_state_label|default:_("Unknown") }}</dd>
    {% if dvr_supported %}
      <dt>{% trans "Distributed" %}</dt>
      <dd>{{ router.distributed|yesno|capfirst }}</dd>
    {% endif %}
    {% if ha_supported %}
      <dt>{% trans "High Availability Mode" %}</dt>
      <dd>{{ router.ha|yesno|capfirst }}</dd>
    {% endif %}
    {% url 'horizon:cisco:router_types:details' router.routertype__id as router_type_url %}
    <dt>{% trans "Router Type" %}</dt>
    <dd><a href="{{ router_type_url }}">{{ router.routertype__id }}</a></dd>
    {% url 'horizon:cisco:device_management:hosting_devices:details' router.routerhost__hosting_device as hosting_device_url %}
    <dt>{% trans "Hosting Device" %}</dt>
    <dd><a href="{{ hosting_device_url }}">{{ router.routerhost__hosting_device }}</a></dd>

    {% if router.external_gateway_info %}
    </dl>
    <h4>{% trans "External Gateway" %}</h4>
    <hr class="header_rule">
    <dl class="dl-horizontal">
      <dt>{% trans "Network Name" %}</dt>
      <dd>{{ router.external_gateway_info.network|default:_("None") }}</dd>
      <dt>{% trans "Network ID" %}</dt>
      <dd><a href="{{ router.external_gateway_info.network_url }}">{{ router.external_gateway_info.network_id|default:_("Unknown") }}</a></dd>
      <dt>{% trans "External Fixed IPs" %}</dt>
      <dd>
        <ul>
          {% for ip in router.external_gateway_info.external_fixed_ips %}
            {% url 'horizon:project:networks:subnets:detail' ip.subnet_id as subnet_url %}
            <li><strong>{% trans "Subnet ID" %}</strong> <a href="{{ subnet_url }}">{{ ip.subnet_id|default:_("Unknown") }}</a></li>
            <li><strong>{% trans "IP Address" %}</strong> {{ ip.ip_address }}</li>
          {% empty %}
            {% trans "None" %}
          {% endfor %}
        </ul>
      </dd>
      <dt>{% trans "SNAT" %}</dt>
      {% if router.external_gateway_info.enable_snat %}
        <dd>{% trans "Enabled" %}</dd>
      {% else %}
        <dd>{% trans "Disabled" %}</dd>
      {% endif %}
    {% else %}
      <dt>{% trans "External Gateway"%}</dt>
      <dd>{% trans "None" %}</dd>
    {% endif %}
  </dl>

  {% if router.cisco_ha__enabled %}
    <h4>{% trans "High Availability" %}</h4>
    <hr class="header_rule">
    <dl class="dl-horizontal">
      {% with details=router.cisco_ha__details %}
        <dt>{% trans "Probe Connectivity" %}</dt>
        <dd>{{ details.probe_connectivity }}</dd>
        <dt>{% trans "Priority" %}</dt>
        <dd>{{ details.priority }}</dd>
        <dt>{% trans "State" %}</dt>
        <dd>{{ details.state }}</dd>
        <dt>{% trans "Redundancy Level" %}</dt>
        <dd>{{ details.redundancy_level }}</dd>
        <dt>{% trans "Type" %}</dt>
        <dd>{{ details.type }}</dd>
      {% endwith %}
    </dl>

    <h4>{% trans "Redundancy Routers" %}</h4>
    <hr class="header_rule">
    <dl class="dl-horizontal">
      {% for redundancy_router in router.cisco_ha__details.redundancy_routers %}
        {% url 'horizon:cisco:routers:details' redundancy_router.id as redundancy_router_url %}
        <dt>{% trans "ID" %}</dt>
        <dd><a href="{{ redundancy_router_url }}">{{ redundancy_router.id }}</a></dd>
        <dt>{% trans "State" %}</dt>
        <dd>{{ redundancy_router.state }}</a></dd>
        <dt>{% trans "Priority" %}</dt>
        <dd>{{ redundancy_router.priority }}</a></dd>
      {% endfor %}
    </dl>
  {% endif %}
</div>
